const neuroList = [
  {
    "name": "interneurons",
    "category": "neurons",
    "definition": ""
  },
  {
    "name": "afferent",
    "category": "neurons",
    "definition": ""
  },
  {
    "name": "efferent",
    "category": "neurons",
    "definition": ""
  },
  {
    "name": "unipolar",
    "category": "neurons",
    "definition": ""
  },
  {
    "name": "multipolar",
    "category": "neurons",
    "definition": ""
  },
  {
    "name": "Schwann cell",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "microglia",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "astrocytes",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "ependymal cells",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "oligodendrocytes",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "satellite cells",
    "category": "glia",
    "definition": ""
  },
  {
    "name": "cell body (soma)",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "dendrites",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "axon hillock",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "axon",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "axon collateral",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "synaptic terminal (or axon terminal)",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "myelin sheath",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "nodes of Ranvier",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "synaptic cleft",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "presynaptic neuron",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "postsynaptic neuron",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "synaptic vesicles",
    "category": "neuronal structures",
    "definition": ""
  },
  {
    "name": "cerebral hemispheres",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "cerebral cortex",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "cerebrum",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "midbrain",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "cerebellum",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "pons",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "medulla oblongata",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "central sulcus",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "precentral gyrus",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "postcentral gyrus",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "lateral sulcus",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "longitudinal fissure",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "frontal lobe",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "parietal lobe",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "occipital lobe",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "temporal lobe",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "insula",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "primary motor cortex",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "primary sensory (somatosensory) cortex",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "primary visual cortex",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "primary auditory cortex",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "association cortices (in general)",
    "category": "brain (external structures)",
    "definition": ""
  },
  {
    "name": "corpus callosum",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "basal nuclei",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "thalamus",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "hypothalamus",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "pituitary gland",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "pineal gland",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "optic chiasm",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "lateral ventricles",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "third ventricle",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "fourth ventricle",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "cerebral aqueduct",
    "category": "brain (internal stuctures)",
    "definition": ""
  },
  {
    "name": "association",
    "category": "brain (fibers)",
    "definition": ""
  },
  {
    "name": "projection",
    "category": "brain (fibers)",
    "definition": ""
  },
  {
    "name": "commissural",
    "category": "brain (fibers)",
    "definition": ""
  },
  {
    "name": "gray matter",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "white matter",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "ventral root",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "ventral (anterior) horn",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "dorsal root",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "dorsal (posterior) horn",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "spinal nerves",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "central canal",
    "category": "spinal cord structures",
    "definition": ""
  },
  {
    "name": "Cranial nerve I",
    "category": "cranial nerves",
    "definition": "Olfactory (smell)"
  },
  {
    "name": "Cranial nerve II",
    "category": "cranial nerves",
    "definition": "Optic (vision)"
  },
  {
    "name": "Cranial nerve III",
    "category": "cranial nerves",
    "definition": "Oculomotor (eye movement)"
  },
  {
    "name": "Cranial nerve IV",
    "category": "cranial nerves",
    "definition": "Trochlear (eye movement)"
  },
  {
    "name": "Cranial nerve V",
    "category": "cranial nerves",
    "definition": "Trigeminal (general sensation)"
  },
  {
    "name": "Cranial nerve VI",
    "category": "cranial nerves",
    "definition": "Abducens (eye movement)"
  },
  {
    "name": "Cranial nerve VII",
    "category": "cranial nerves",
    "definition": "Facial (taste, facial movement)"
  },
  {
    "name": "Cranial nerve VIII",
    "category": "cranial nerves",
    "definition": "Vestibulocochlear (hearing, balance)"
  },
  {
    "name": "Cranial nerve IX",
    "category": "cranial nerves",
    "definition": "Glossopharyngeal (taste)"
  },
  {
    "name": "Cranial nerve X",
    "category": "cranial nerves",
    "definition": "Vagus (taste)"
  },
  {
    "name": "Cranial nerve XI",
    "category": "cranial nerves",
    "definition": "Acessory (head and shoulder movement)"
  },
  {
    "name": "Cranial nerve XII",
    "category": "cranial nerves",
    "definition": "Hypoglossal (tongue movement)"
  },
  {
    "name": "dura mater",
    "category": "meninges",
    "definition": ""
  },
  {
    "name": "arachnoid mater",
    "category": "meninges",
    "definition": ""
  },
  {
    "name": "pia mater",
    "category": "meninges",
    "definition": ""
  },
  {
    "name": "subarachnoid space",
    "category": "meninges",
    "definition": ""
  }
];

import { useState, useEffect } from 'react';


export const pickFromNeuroList = (_neuroList, activeCard) => {
  const options = _neuroList.filter(d => activeCard?.name !== d.name);

  if (!options.length) return null;

  const index = Math.floor(Math.random() * options.length);

  return options[index];
};

export const useNeuroList = () => {
  const [filteredNeuroList, setFilteredNeuroList] = useState(neuroList);
  const [filters, setFilters] = useState(
    neuroList.map(b => b.category).filter((value, index, array) => array.indexOf(value) === index)
  );
  const [selectedFilters, setSelectedFilters] = useState([]);
  const [seenCards, setSeenCards] = useState([]);
  const [activeCard, setActiveCard] = useState(null);

  useEffect(() => {
    setActiveCard(pickFromNeuroList(filteredNeuroList, activeCard));
  }, []);

  useEffect(() => {
    const _filteredNeuroList = neuroList
      .filter(d => !seenCards.includes(d.name))
      .filter(d => !(selectedFilters.length && !selectedFilters.includes(d.category)));
    setFilteredNeuroList(_filteredNeuroList);
  }, [seenCards]);

  // useEffect(() => {
  //   setFilteredNeuroList(processNeuroList(neuroList));
  // }, [neuroList]);

  useEffect(() => {
    if (!filteredNeuroList.length) return;

    let _neuroList = neuroList
      .filter(d => !(selectedFilters.length && !selectedFilters.includes(d.category)))
      .filter(d => !seenCards.includes(d.name));

    setFilteredNeuroList(_neuroList);

    setActiveCard(pickFromNeuroList(_neuroList, activeCard));

  }, [selectedFilters])

  return {
    neuroList: filteredNeuroList,
    filters,
    selectedFilters,
    setSelectedFilters,
    seenCards,
    pickFromNeuroList: (activeCard) => pickFromNeuroList(filteredNeuroList, activeCard),
    clearCards: () => {
      setSeenCards([]);
      setActiveCard(pickFromNeuroList(filteredNeuroList, null));
    },
    activeCard,
    nextRight: () => {
      setSeenCards([...seenCards, activeCard.name]);
      setActiveCard(pickFromNeuroList(filteredNeuroList, activeCard));
    },
    nextWrong: () => {
      setActiveCard(pickFromNeuroList(filteredNeuroList, activeCard));
    },
  };
};

